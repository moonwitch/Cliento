<!doctype html>
<html lang="nl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard | Lyn & Skin</title>
    <!--<link rel="stylesheet" href="../css/style.css" />-->
    <!-- Fluid viewport -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="../js/config.js"></script>
    <script src="../js/auth.js" defer></script>

    <script src="./js/dashboard.js" defer></script>
    <script src="./js/cms.js" defer></script>
    <script src="./js/treatments.js" defer></script>
</head>

<body>
    <nav>
        <ul>
            <li>
                <details class="dropdown">
                    <summary>Dashboard</summary>

                    <ul dir="rtl">
                        <li><a href="#" onclick="loadModule('dashboard')" class="menu-item active" id="nav-dashboard">
                                <i class="fas fa-home"></i> Overzicht
                            </a></li>
                        <li><a href="#" onclick="loadModule('calendar')" class="menu-item" id="nav-calendar">
                                <i class="fas fa-calendar-alt"></i> Agenda
                            </a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details class="dropdown">
                    <summary>CRM</summary>

                    <ul dir="rtl">
                        <li><a href="#" onclick="loadModule('clients')" class="menu-item" id="nav-clients">
                                <i class="fas fa-users"></i> Klanten
                            </a></li>
                        <li><a href="#" onclick="loadModule('appointments')" class="menu-item" id="nav-appointments">
                                <i class="fas fa-calendar-check"></i> Afspraken
                            </a></li>
                    </ul>
                </details>
            </li>
            <li>
                <details class="dropdown">
                    <summary>Management</summary>

                    <ul dir="rtl">
                        <<li><a href="#" onclick="loadModule('staff')" class="menu-item" id="nav-staff">
                                <i class="fas fa-user-nurse"></i> Personeel
                            </a>
            </li>
            <li><a href="#" onclick="loadModule('stock')" class="menu-item" id="nav-stock">
                    <i class="fas fa-boxes"></i> Stock
                </a></li>
            <li><a href="#" onclick="loadModule('treatments')" class="menu-item" id="nav-treatments">
                    <i class="fas fa-syringe"></i> Behandelingen
                </a></li>
        </ul>
        </details>
        </li>
        </ul>



        <button onclick="handleLogout()" class="btn-secondary" style="width: 100%">
            Uitloggen
        </button>
    </nav>


    <main class="container-fluid" id="app-content">
        <h1>Welkom Harlyne ðŸ‘‹</h1>
        <p>Selecteer een module in het menu.</p>
    </main>
    <script>
        // 1. Security Check & Init
        document.addEventListener("DOMContentLoaded", () => {
            checkAdmin();
        });

        async function checkAdmin() {
            const {
                data: {session},
            } = await supabaseClient.auth.getSession();
            if (!session) {
                window.location.href = "../index.html";
                return;
            }

            // Role check (optioneel, afhankelijk van je RPC setup)
            // const { data: role } = await supabaseClient.rpc("get_my_role");
            // if (role !== "admin" && role !== "superadmin") { ... }
        }
    </script>
</body>

</html>
